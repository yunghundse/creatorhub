{
  "version": "7.0",
  "lastUpdated": "2026-02-11",
  "codeName": "Team Edition",
  "stack": {
    "frontend": "React 19 + Vite 7",
    "backend": "Firebase (Auth + Firestore)",
    "hosting": "Vercel",
    "payments": "Stripe (Demo-Modus, Live-Ready)",
    "email": "SendGrid / Resend (konfiguriert)",
    "pwa": true
  },

  "security_level": "high",
  "billing_ui": "ready",
  "email_system": "configured",
  "email_automation": "active",
  "pricing_logic": "optimized",
  "stripe_integration": "live-ready",

  "app_readiness_score": {
    "total": 94,
    "breakdown": {
      "pwa_mobile": { "score": 95, "status": "active", "details": "Manifest, Service Worker, Mobile-First UI, Push-Ready" },
      "notification_system": { "score": 90, "status": "active", "details": "In-App Glocke mit Dropdown, Push-SW bereit" },
      "asset_handling": { "score": 85, "status": "active", "details": "Watermark-Generator, Asset Versioning (v1/v2/Final), ContentProtection" },
      "ai_tools": { "score": 88, "status": "active", "details": "Caption Generator (5 Plattformen), Viral Predictor (Preview), Repurposing (Preview)" },
      "legal_compliance": { "score": 100, "status": "active", "details": "Impressum, AGB, Datenschutz (DSGVO), NDA-Signing" },
      "security": { "score": 92, "status": "active", "details": "Session Management, Content Protection, Audit Logs, Account Deletion Cleanup, company_members Cleanup" },
      "pricing_billing": { "score": 95, "status": "active", "details": "3-Tier Pricing, Stripe Checkout, Subscription Dashboard, Billing History" },
      "email_automation": { "score": 85, "status": "configured", "details": "6 Trigger-Types, HTML Templates, Firestore Queue" },
      "admin_dashboard": { "score": 95, "status": "active", "details": "User-Management, Content-Moderation, Revenue, System-Statistik, Wartung" },
      "team_management": { "score": 96, "status": "active", "details": "company_members Bridge Table, Pending/Approved Flow, Dual-View Dashboard, Firma Tasks/Assets/Admin" },
      "company_system": { "score": 95, "status": "active", "details": "CompanyContext, FirmaDashboard (Owner/Member View), FirmaTasks, FirmaAssets, FirmaAdmin, Dynamic Navigation" }
    }
  },

  "roles": ["admin", "manager", "model"],

  "database_schema": {
    "users": {
      "fields": ["uid", "email", "displayName", "role", "approved", "blocked", "companyId", "abo", "createdAt"],
      "note": "companyId is legacy field, also mirrored in company_members"
    },
    "companies": {
      "fields": ["name", "description", "ownerId", "ownerEmail", "inviteCode", "abo", "createdAt"],
      "note": "Owner is manager/influencer who created the company"
    },
    "company_members": {
      "fields": ["companyId", "userId", "email", "displayName", "role", "status", "joinedAt"],
      "status_values": ["pending", "approved"],
      "note": "Bridge table: user joins via invite -> pending -> owner approves -> approved -> dashboard access"
    },
    "company_tasks": {
      "fields": ["companyId", "title", "description", "assignedTo", "priority", "status", "createdBy", "createdAt"],
      "note": "Tasks assigned within a company team"
    }
  },

  "routes": {
    "public": ["/login", "/register"],
    "core": ["/", "/content", "/finanzen", "/kalender", "/chat", "/einstellungen", "/onboarding", "/fyp", "/admin"],
    "settings": ["/einstellungen/sessions"],
    "legal": ["/legal/impressum", "/legal/agb", "/legal/datenschutz", "/legal/nda"],
    "firma": ["/firma/dashboard", "/firma/tasks", "/firma/assets", "/firma/admin"],
    "dashboard": [
      "/dashboard/company", "/dashboard/models", "/dashboard/collab", "/dashboard/trends",
      "/dashboard/assets", "/dashboard/analytics", "/dashboard/schedule", "/dashboard/revenue",
      "/dashboard/approvals", "/dashboard/asset-library", "/dashboard/brand-deals",
      "/dashboard/audit-log", "/dashboard/deadlines", "/dashboard/pricing", "/dashboard/subscription"
    ],
    "premium": [
      "/premium", "/premium/viral-predictor", "/premium/repurposing", "/premium/smart-inbox",
      "/premium/tax-export", "/premium/invoicing", "/premium/watermark", "/premium/versioning",
      "/premium/annotations", "/premium/ghost-mode", "/premium/caption-writer"
    ]
  },

  "totalRoutes": 46,
  "totalComponents": 56,

  "features": {
    "companySystem": {
      "companyContext": true,
      "companyMembersBridgeTable": true,
      "pendingApprovedFlow": true,
      "dualViewDashboard": true,
      "ownerView": "stats, pending alerts, quick actions (team, tasks, assets, calendar, analytics)",
      "memberView": "welcome, onboarding guide (Kalender/Aufgaben/Assets), quick actions",
      "firmaTasks": true,
      "firmaAssets": true,
      "firmaAdmin": "team management, approve/reject, billing tab",
      "dynamicNavigation": "Mein Team label replaced with company name, hidden if no company"
    },
    "pwa": {
      "manifest": true,
      "serviceWorker": true,
      "pushNotifications": "ready",
      "offlineSupport": true,
      "installable": true
    },
    "notifications": {
      "inAppBell": true,
      "pushReady": true,
      "unreadBadge": true,
      "types": ["approval", "chat", "invite", "payment", "system"]
    },
    "assetHandling": {
      "watermarkGenerator": true,
      "versionControl": true,
      "contentProtection": true,
      "rightClickProtection": true,
      "dynamicWatermark": true
    },
    "aiTools": {
      "captionGenerator": true,
      "viralPredictor": "preview",
      "autoRepurposing": "preview",
      "smartInbox": "preview"
    },
    "legal": {
      "impressum": true,
      "agb": true,
      "datenschutz": true,
      "ndaSigning": true
    },
    "security": {
      "sessionManagement": true,
      "contentProtection": true,
      "auditLogs": true,
      "loginAudit": true,
      "accountDeletionCleanup": true,
      "companyMembersCleanup": true
    },
    "billing": {
      "pricingTable": true,
      "stripeCheckout": "demo",
      "subscriptionDashboard": true,
      "billingHistory": true,
      "cancelFlow": true,
      "plans": {
        "free": { "price": 0, "slots": 1, "premiumAccess": false },
        "pro": { "price": 29, "slots": 5, "premiumAccess": "partial", "stripePriceId": "price_pro_monthly" },
        "business": { "price": 79, "slots": 10, "premiumAccess": "full", "stripePriceId": "price_business_monthly" }
      }
    },
    "emailAutomation": {
      "triggers": ["team_invite", "content_approval", "password_changed", "new_login", "payment_success", "content_comment"],
      "templates": "html_corporate",
      "queue": "firestore_emailQueue",
      "provider": "sendgrid_or_resend"
    },
    "admin": {
      "userManagement": true,
      "contentModeration": true,
      "revenueOverview": true,
      "systemStats": true,
      "maintenanceMode": true,
      "registrationChart": true,
      "subscriptionStats": true,
      "serverStatus": true
    },
    "navigation": {
      "premiumRemovedFromMainNav": true,
      "firmaInNav": true,
      "dynamicCompanyLabel": true,
      "requiresCompanyFlag": true,
      "note": "Premium moved to Settings/Abo-Verwaltung, Firma shows only when user has companyId"
    }
  },

  "v7_changes": {
    "removed": ["Premium/Crown from all role navigation bars"],
    "added": [
      "CompanyContext (src/contexts/CompanyContext.jsx)",
      "FirmaDashboard with Owner/Member dual view",
      "FirmaTasks with Firestore CRUD",
      "FirmaAssets with grid/list view",
      "FirmaAdmin with team + billing tabs",
      "company_members Firestore collection (bridge table)",
      "company_tasks Firestore collection",
      "Dynamic nav: requiresCompany flag, company name label",
      "Account deletion cleanup for company_members",
      "Leave company cleanup for company_members",
      "Join company creates company_members entry with pending status"
    ],
    "modified": [
      "App.jsx: CompanyProvider wrapper, firma route imports",
      "Layout.jsx: ROLE_NAV without Premium, with firma + requiresCompany",
      "SettingsPage.jsx: company_members cleanup on delete/leave/join"
    ]
  },

  "automationNeeded": {
    "stripeWebhook": "Vercel Serverless Function fuer Payment-Confirmation",
    "emailProcessor": "Cloud Function die emailQueue verarbeitet",
    "pushService": "Firebase Cloud Messaging oder Web Push API",
    "fileStorage": "Firebase Storage fuer echte Asset-Uploads",
    "aiBackend": "OpenAI/Claude API fuer echte Caption-Generation"
  }
}
